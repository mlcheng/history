"use strict";var iqwerty=iqwerty||{};iqwerty.history=function(){function t(t,n){this.state=t,this.$$length=n}function n(t,n,e){return t=u()+(h===c?c:"")+t,n=n||document.title,e=e||null,window.history.pushState?void(a()!==t&&(window.history.pushState(e,n,t),i())):console.error("History API not supported")}function e(){window.history.back()}function r(n,e){e&&(h=e.base),t.prototype.states=n,i(),window.addEventListener("popstate",function(){i()})}function i(){var n=t.prototype.states,e=o(n);if(e){var r=e.state.split(":")[0];r=l().split(r)[1],n[e.state](r||void 0),n=null,e=null,r=null}}function o(n){var e=Object.keys(n).map(function(n){if(""===n)return new t(n,0);var e=n.split(":")[0],r=0===l().indexOf(e)?e.length:-1;return new t(n,r)}).reduce(function(t,n){return-1===t.$$length?null:t.$$length>=n.$$length?t:n});return l()&&-1===e.$$length?(console.warn("Current state is unhandled"),null):e}function s(){return window.location.pathname}function u(){return h===c?s():h}function l(){var t;return h===c?(t=window.location.hash,t=t.split(c)[1]):t=s().split(u())[1],t?("/"===t.substr(-1)&&(t=t.substring(0,t.length-1)),t):""}function a(){return u()+l()}var c="#!/",h=c;return t.prototype.states={},{Push:n,Pop:e,States:r}}();