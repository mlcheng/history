"use strict";var iqwerty=iqwerty||{};iqwerty.history=function(){function t(t,n){this.state=t,this.$$length=n}function n(t,n,e){if(t=u()+(h===c?c:"")+t,n=n||document.title,e=e||null,!window.history.pushState)throw"History API not supported";l()!==t&&(window.history.pushState(e,n,t),r())}function e(){window.history.back()}function i(n,e){e&&(h=e.base),t.prototype.States=n,r(),window.addEventListener("popstate",function(){r()})}function r(){var n=t.prototype.States,e=o(n);if(e){var i=e.state.split(":")[0];i=a().split(i)[1],n[e.state](i||void 0)}}function o(n){var e=Object.keys(n).map(function(n){if(""===n)return new t(n,0);var e=n.split(":")[0],i=0===a().indexOf(e)?e.length:-1;return new t(n,i)}).reduce(function(t,n){return t.$$length===-1?null:t.$$length>=n.$$length?t:n});return a()&&e.$$length===-1?(console.warn("Current state is unhandled"),null):e}function s(){return window.location.pathname}function u(){return h===c?s():h}function a(){var t;return h===c?(t=window.location.hash,t=t.split(c)[1]):t=s().split(u())[1],t?("/"===t.substr(-1)&&(t=t.substring(0,t.length-1)),t):""}function l(){return u()+a()}var c="#!/",h=c;return t.prototype.States={},{Push:n,Pop:e,States:i}}();