"use strict";var iqwerty=iqwerty||{};iqwerty.history=function(){function t(t,n){this.state=t,this.$$length=n}function n(t,n,e){var i=s()+(h===c?c:"")+t;if(n=n||document.title,e=e||null,!window.history.pushState)throw new Error("History API not supported");a()!==t&&(window.history.pushState(e,n,i),r())}function e(){window.history.back()}function i(t,n){n&&(h=n.base),Object.keys(t).forEach(function(n){l[n]=t[n]}),r(),window.addEventListener("popstate",function(){r()})}function r(){var t=o(l);if(t){var n=t.state.split(":")[0];n=a().split(n)[1],l[t.state](n||void 0)}}function o(n){var e=Object.keys(n).map(function(n){if(""===n)return new t(n,0);var e=n.split(":")[0];return new t(n,0===a().indexOf(e)?e.length:-1)}).reduce(function(t,n){return-1===t.$$length?null:t.$$length>=n.$$length?t:n});return a()&&-1===e.$$length?(console.warn("Current state is unhandled"),null):e}function u(){return window.location.pathname}function s(){return h===c?u():h}function a(){var t;return h===c?(t=window.location.hash,t=t.split(c)[1]):t=u().split(s())[1],t?("/"===t.substr(-1)&&(t=t.substring(0,t.length-1)),t):""}var c="#!/",l={},h=c;return{Push:n,Pop:e,States:i}}();