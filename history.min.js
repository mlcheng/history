"use strict";var iqwerty=iqwerty||{};iqwerty.history=function(){function t(t,n){this.state=t,this.$$length=n}function n(t,n,e){return t=h+t,h===c&&(t=s()+t),n=n||document.title,e=e||null,window.history.pushState?void(a()!==t&&(window.history.pushState(e,n,t),r(u()))):console.error("History API not supported")}function e(n,e){e&&(h=e.base),t.prototype.states=n,r(o(n)),window.addEventListener("popstate",function(){r(u())})}function r(n){console.log("handling state");var e=t.prototype.states,r=o(e);if(r){var i=r.state.split(":")[0];i=u().split(i)[1],e[r.state](i||null)}}function o(n){var e=Object.keys(n).map(function(n){if(""===n)return new t(n,0);var e=h+n.split(":")[0],r=0===u().indexOf(e)?e.length-h.length:-1;return new t(n,r)}).reduce(function(t,n){return-1===t.$$length?null:t.$$length>=n.$$length?t:n});return u()&&-1===e.$$length?(console.warn("Current state is unhandled"),null):e}function i(){return window.location.pathname}function s(){return l||(l=i(),h!==c&&(l=h)),l}function u(){var t=h===c?window.location.hash:i();return t?("/"===t.substr(-1)&&(t=t.substring(0,t.length-1)),t):""}function a(){return h===c?s()+u():u()}var l,c="#!/",h=c;return t.prototype.states={},{Push:n,States:e}}();