"use strict";var iqwerty=iqwerty||{};iqwerty.history=function(){function t(t,n){this.state=t,this.$$length=n}function n(t,n,e){return t=s()+(c===l?l:"")+t,n=n||document.title,e=e||null,window.history.pushState?void(a()!==t&&(window.history.pushState(e,n,t),r(u()))):console.error("History API not supported")}function e(n,e){e&&(c=e.base),t.prototype.states=n,r(i(n)),window.addEventListener("popstate",function(){r(u())})}function r(n){var e=t.prototype.states,r=i(e);if(r){var o=r.state.split(":")[0];o=u().split(o)[1],e[r.state](o||null)}}function i(n){var e=Object.keys(n).map(function(n){if(""===n)return new t(n,0);var e=n.split(":")[0],r=0===u().indexOf(e)?e.length:-1;return new t(n,r)}).reduce(function(t,n){return-1===t.$$length?null:t.$$length>=n.$$length?t:n});return u()&&-1===e.$$length?(console.warn("Current state is unhandled"),null):e}function o(){return window.location.pathname}function s(){return c===l?o():c}function u(){var t;return c===l?(t=window.location.hash,t=t.split(l)[1]):t=o().split(s())[1],t?("/"===t.substr(-1)&&(t=t.substring(0,t.length-1)),t):""}function a(){return s()+u()}var l="#!/",c=l;return t.prototype.states={},{Push:n,States:e}}();